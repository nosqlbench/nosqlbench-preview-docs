<!DOCTYPE html>
<html lang="en-US">
<head>
  <script src="https://previewdocs.nosqlbench.io/theme.min.js" integrity="sha384-IpIaa84kOKgkF5EJ0fD/kBe2wtIIsIB60ANGmuJxeA0dz5bSRfwBwp2/QybtQpU2"></script>
  <link rel="stylesheet" href="https://previewdocs.nosqlbench.io/abridge-switcher.css?h=4238d999f44a7bb130d5" />
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="preload" as="style" class="preStyle" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" crossorigin="anonymous" />
  <link rel="preload" as="style" class="preStyle" href="https://previewdocs.nosqlbench.io/katex.min.css" integrity="sha384-ZPe7yZ91iWxYumsBEOn7ieg8q/o+qh/hQpSaPow8T6BwALcXSCS6C6fSRPIAnTQs" />
  <script defer src="https://previewdocs.nosqlbench.io/search_index.en.js?h=86583272338c691f1bb6" integrity="sha384-OKha9T0pwfrJHNey2CNW44GnP89XWdiSF+ha+KbH5pGWeS1kANWJ7H5lJajhxi6R"></script>
  <script defer src="https://previewdocs.nosqlbench.io/abridge-bundle-nofacade.min.js?h=9bcf621a2fcab7336017" integrity="sha384-u8AROOUG6n2Xjk2+7pvkkfeSIqinjI1tmqeBpZRlZtc5KFO/8DyFfEir6fAE2wcq"></script>
  <script defer src="https://previewdocs.nosqlbench.io/katexbundle.min.js?h=a550ba0540c37778ffcb" integrity="sha384-ddSpLWE2IN4NTX956m9zVX0cUonZmEeunMpVZPgEcwmGficsSB8WtHlbuWkGPf8d"></script>
  <meta name="base" content="https://previewdocs.nosqlbench.io" />
<meta name="robots" content="index, follow" />
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <title>Scaling Math | NoSQLBench Project (PREVIEW)</title>
  <meta name="copyright" content="NoSQLBench Project (PREVIEW)" />
  <meta name="description" content="NoSQLBench is an Open Source, Multi-Protocol, Pluggable, Scriptable, NoSQL (and more) Testing System." />
  <link rel="canonical" href="https://previewdocs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/scaling-math/" />
  <meta name="keywords" content="Abridge, Abridge.css, Zola, Theme, Zola Theme, getzola, Semantic Html, Fast, lightweight" />
  <meta property="og:url" content="https://previewdocs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/scaling-math/" />
  <meta name="twitter:url" content="https://previewdocs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/scaling-math/" />
  <meta property="og:description" content="NoSQLBench is an Open Source, Multi-Protocol, Pluggable, Scriptable, NoSQL (and more) Testing System." />
  <meta name="twitter:description" content="NoSQLBench is an Open Source, Multi-Protocol, Pluggable, Scriptable, NoSQL (and more) Testing System." />
  <meta property="og:title" content="Scaling Math | NoSQLBench Project (PREVIEW)" />
  <meta name="twitter:title" content="Scaling Math | NoSQLBench Project (PREVIEW)" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://previewdocs.nosqlbench.io/nb5banner.png" />
  <meta property="og:image" content="https://previewdocs.nosqlbench.io/nb5banner.png" />
  <meta property="og:site_name" content="NoSQLBench Project (PREVIEW)" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:type" content="website" />
  <meta property="og:updated_time" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="theme-color" content="#333333" />
  <meta name="msapplication-TileColor" content="#333333" />
  <link rel="manifest" href="https://previewdocs.nosqlbench.io/site.webmanifest" />
  <link rel="mask-icon" href="https://previewdocs.nosqlbench.io/safari-pinned-tab.svg" color="#ff9900" />
  <link rel="apple-touch-icon" sizes="180x180" href="https://previewdocs.nosqlbench.io/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="https://previewdocs.nosqlbench.io/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="https://previewdocs.nosqlbench.io/favicon-16x16.png" />
  <noscript><link rel="stylesheet" href="https://previewdocs.nosqlbench.io/nojs.css" /></noscript>
</head>
<body>
  <header>
    <nav>
      <div><h1><a href="https://previewdocs.nosqlbench.io/"><img src="https://previewdocs.nosqlbench.io/nb5logo.png" alt="NoSQLBench5 (preview)" width="32" height="32" /> NoSQLBench v5 (PREVIEW)</a></h1></div><div>
        <ul><li> <h2><a href="https://previewdocs.nosqlbench.io/blog/">Blog</a></h2> </li><li> <h2><a href="https://previewdocs.nosqlbench.io/getting-started/">Getting Started</a></h2> </li><li> <h2><a href="https://previewdocs.nosqlbench.io/release-notes/">Release Notes</a></h2> </li><li class="js"><i type="reset" id="mode" class="svgs adjust"></i></li></ul>
      </div>
      <div>
        <form autocomplete=off class="js" name="goSearch" id="searchbox">
          <div class="searchd">
            <input id="searchinput" type="text" placeholder="Search" title="Search" />
            <button type="submit" title="Search"><i class="svgs search"></i></button>
          </div>
          <div><div id="suggestions"></div></div>
        </form>
      </div>

      <a href="http://github.com/nosqlbench/nosqlbench-build-docs" title="This doc site's project repo">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 22 18"
             fill="none"
             stroke="currentColor" stroke-width="1" stroke-linecap="round"
             stroke-linejoin="round">
          <path
              d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
        </svg>
      </a>
      <a href="http://nosqlbench.io" title="NoSQLBench Project Site">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 22 18"
             fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round"
             stroke-linejoin="round">
          <path
              d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
        </svg>
      </a>
    </nav>
    <hr /><div style="position:sticky"><span><a href="&#x2F;">NB5 Docsâ–º </a></span><span><a href="&#x2F;user-guide&#x2F;">User Guideâ–º </a></span><span><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;">Advanced Topicsâ–º </a></span><span title="A deeper dive into frequent topics of discussion around scale testing."><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;"><strong>Testing at Scaleâ–¼</strong> </a></span><span title="[current page]"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;scaling-math&#x2F;"><strong>Scaling Math ðŸ–º</strong></a></span>
</div></header>
  <main><!-- active_page: user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;scaling-math.md -->
<!-- active_section: user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;_index.md -->


<!-- lower_root: user-guide&#x2F;advanced-topics&#x2F;_index.md -->
<!-- >upper_root: user-guide&#x2F;advanced-topics&#x2F;_index.md -->

<div class="toc" aria-hidden="true" id="">
<!--  <h4>Testing at Scale</h4>--><div class="toc-sticky"><div class="toc-item"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;advanced-topics&#x2F;"title="detailed explanation of all available configuration methods in nb5">Advanced Topics</a></div><div class="toc-item"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;labeling-system&#x2F;">Labeling Results</a></div><div class="toc-item"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;labeling-controls&#x2F;">Labeling Controls</a></div><div class="toc-item"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;timing-terms&#x2F;">Timing Terms Explained</a></div><div class="toc-item"title="Detailed examples of different ways to configure nb5"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;configuration-techniques&#x2F;">â–ºConfig Methods</a></div><div class="toc-item"title="NoSQLBench comes with a fully scriptable runtime for advanced testing scenarios"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;scenario-scripting&#x2F;">â–ºScenario Scripting</a></div><div class="toc-item"title="Concepts and Methods for advanced performance analysis"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;performance-factoring&#x2F;">â–ºPerformance Factoring</a></div><div class="toc-item"title="A deeper dive into frequent topics of discussion around scale testing."><strong>â–¼Testing at Scale</strong></div><!-- subsection_page_path: &#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;client-sizing&#x2F; -->
    <div class="toc-item-child">
      <a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;client-sizing&#x2F;">Client Sizing</a>
    </div><!-- subsection_page_path: &#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;scaling-up&#x2F; -->
    <div class="toc-item-child">
      <a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;scaling-up&#x2F;">Scaling Up</a>
    </div><!-- subsection_page_path: &#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;vantage-points&#x2F; -->
    <div class="toc-item-child">
      <a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;vantage-points&#x2F;">Vantage Points</a>
    </div><!-- subsection_page_path: &#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;scaling-math&#x2F; -->
    <div class="toc-item-child">
      <a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;scaling-math&#x2F;"><strong>Scaling Math</strong></a>
    </div><!-- subsection_page_path: &#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;determinism&#x2F; -->
    <div class="toc-item-child">
      <a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;determinism&#x2F;">Determinism &amp; Variation</a>
    </div></div>
</div>

<article>

  <h2 id="scaling-trade-offs">Scaling Trade-Offs</h2>
<p>In general, there is a triangular trade-off between service time, op rate, and data density,
where reads (index traversals or &quot;lookups&quot;) are generally more dependent on working set size than
other operations. There is a fundamental three-way trade-off between higher throughput, higher
working set, and lower (better) latency. This is true for all modern databases. In general, read 
patterns always access indexes of some type for a random-access system. The performance of these 
indexes varies widely based on hardware, software, and data factors. Ideally, index performance 
tends to $ \Omega(Log_2(n)) $ for binary search, which approximates the best performance 
possible, except in special data-dependent cases, where slightly improved performance is 
possible, but not generally reliable. No matter the underlying hardware, the cardinality of 
your indexable values <em>will</em> be a factor.</p>
<p>This is important to keep in mind, since it makes it very clear that you must test with 
realistic data -- enough data with enough variety and a characteristic distribution. However, 
you don't have to do this at the same scale as the system you are characterizing for.</p>
<p>The data or index density question can be addressed per unit, meaning per-node, per-core, or 
whatever the fundamental unit of deployed scale your system architecture offers.</p>
<h2 id="test-small-and-extrapolate">Test small and extrapolate</h2>
<p>It is not necessary nor reasonable to test every system at production scale for the purposes of 
trusting its operational behavior. The basic principles used to build scalable systems allow for 
us to build <em>scale</em> models of these systems and verify the character of scaling itself. Nearly 
all scalable systems amortize work over time and space. There is always a per-unit way of 
measuring capacity such that the projected capacity is directly proportional to the scale of the 
system deployment. Identifying how the system capacity relates to the deployment footprint is 
essential, and depends on the primary scaling mechanisms of the system in question.</p>
<p>You want to be able to make reliable statements about the scale of some supposed system 
deployment from the data you collect in the smaller-scale test, like</p>
<ol>
<li>If I add more data to the existing system, how does this manifest in terms of throughput or 
latency impact?</li>
<li>If I were to add more resources to the system, does it scale up linearly or is there otherwise a 
reliable estimate which can be used?</li>
<li>If a unit of scale is removed (like a node), what happens to the throughput and latency?</li>
<li>For a given increase in system resources across the board, how are the throughput and 
latency affected?</li>
</ol>
<p>To answer these questions, you need to establish some basic formulae and verify them. What this 
means will depend directly on your system design.</p>
<h1 id="test-the-extrapolation">Test the extrapolation</h1>
<p>Once you have established the formulae to estimate changes in capacity or performance based on 
changes in system topology, you need change the scale of the system and run your test again to 
verify that the character of scaling holds. If it does not, then there is an important detail 
that needs to be discovered and added to the scaling math.</p>
<h1 id="trust-your-extrapolation">Trust your extrapolation</h1>
<p>Once you've proven that your scaling math works, it's time to capture it in context. You need to 
document the details of the test, including workload, dataset, density, topology, system 
configuration, and so on. It is only by knowing how similar this system is to another supposed 
system that you can trust the data for other estimates.</p>
<p>A frequent mistake that technologists make when testing systems like this is using the data out 
of context, against a system where only a couple details have changed. While this might sound 
reasonable, once you go beyond two or three small changes, our ability to reliably predict 
systemic changes drops of very quickly. More advanced analysis might help to make this test data 
more portable, but it is certainly a fools errand to try to intuit too far away from your known 
configuration.</p>
<p>By knowing when a system is congruent to the one you tested, you can known when to trust your 
scaling math. This is why it is critical that you document the circumstances of what and how you 
tested, so that in future situations you know if you have meaningfully relevant data.</p>
<p>Once you have the ability to extrapolate or interpolate (within reason) how system topology 
affect the operational behavior of your system, it's time contextualize your data. If is fair to 
use the scaling math for other systems which are the same as the one you tested. One frequent 
mistake with using this type of </p>

<p><b><a href="#">Back to top</a></b></p>
</article>
<div class="toc" aria-hidden="true">
  <div class="toc-sticky">
    <h5>Scaling Math</h5>
    <div class="toc-item">
      <a class="subtext" href="https://previewdocs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/scaling-math/#scaling-trade-offs">Scaling Trade-Offs</a>
    </div>
    <div class="toc-item">
      <a class="subtext" href="https://previewdocs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/scaling-math/#test-small-and-extrapolate">Test small and extrapolate</a>
    </div>
    <div class="toc-item">
      <a class="subtext" href="https://previewdocs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/scaling-math/#test-the-extrapolation">Test the extrapolation</a>
    </div>
    <div class="toc-item">
      <a class="subtext" href="https://previewdocs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/scaling-math/#trust-your-extrapolation">Trust your extrapolation</a>
    </div>
  </div>
</div>
  </main>
  <footer>
    <hr />
    <div class="c">
      <nav>
        <ul></ul>
      </nav>
      <p class="s90">Copyright &copy; 2023-2024 NoSQLBench Project (PREVIEW)</p>
    </div>
  </footer>
</body>
</html>
